
<!DOCTYPE html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="chrome=1" />
	<meta name="description" content="Object의 toString과 toValue 메서드에 대한 고찰 | Boxer's Front End" />
	<title>Object의 toString과 toValue 메서드에 대한 고찰 | Boxer's Front End</title>
	<meta name="author" content="boxersb">
	<link href='/assets/themes/slate/css/stylesheet.css' rel="stylesheet" media="all">
	<link href='/assets/themes/slate/css/pygment_trac.css' rel="stylesheet" media="all">
	<link href="http://feeds.feedburner.com/" rel="alternate" title="Object의 toString과 toValue 메서드에 대한 고찰" type="application/atom+xml">
	<script src="http://cdnjs.cloudflare.com/ajax/libs/modernizr/2.0.6/modernizr.min.js"></script>
</head>
<body>

<!-- HEADER -->
<div id="header_wrap" class="outer">
    <header class="inner">
      <a id="forkme_banner" href="https://github.com/boxersb">View on GitHub</a>

      <h1 id="project_title"><a href="/">Boxer's Front End</a></h1>
      <!-- <h2 id="project_tagline"></h2> -->

		<nav class="nav-global">
			<ul>
				<li class="archive"><a href="/archive.html">Archive</a></li>
				<li class="page"><a href="/pages.html">Pages</a></li>
				<li class="category"><a href="/categories.html">Categories</a></li>
				<li class="tag"><a href="/tags.html">tags</a></li>
			</ul>
		</nav>
    </header>
</div>

<!-- MAIN CONTENT -->
<div id="main_content_wrap" class="outer">
	<section id="main_content" class="inner">
		

<article class="unit-article layout-post">
	<div class="unit-inner unit-article-inner">
		<div class="content">
			<header>
				<div class="unit-head">
					<div class="unit-inner unit-head-inner">
						<h1 class="h2 entry-title"><a href="/javascript/2010/04/05/tostring-and-tovalue-of-object">Object의 toString과 toValue 메서드에 대한 고찰</a></h1>
					</div><!-- unit-inner -->
				</div><!-- unit-head -->
			</header>

			<div class="bd">
				<div class="entry-content">
					<div class="meta">
						<ul class="list-date-category">
							<li>
								<date class="date-pub" title="2010-04-05T00:00:00+09:00" datetime="2010-04-05T00:00:00+09:00" pubdate>
								<span class="month"><abbr>April</abbr></span>
								<span class="day">05</span>
								<span class="year">2010</span>
								</date>
							</li>
							<li class="author">
								by <a href="https://twitter.com/boxersb" target="twitter">boxersb</a> in 
							</li>
							
							


  
     
    	<li><a href="/categories.html#javascript-ref">
    		javascript <span>3</span>
    	</a></li>
    
  


						</ul>
						<ul class="list-tag list-linear">
							<li class="list-head">tags: </li>
							
							


  
     
    	<li><a href="/tags.html#javascript-ref">javascript <span>4</span></a></li>
     
    	<li><a href="/tags.html#object-ref">object <span>1</span></a></li>
     
    	<li><a href="/tags.html#toString-ref">toString <span>1</span></a></li>
     
    	<li><a href="/tags.html#toValue-ref">toValue <span>1</span></a></li>
    
  



						</ul>
					</div><!-- meta -->

					<div class="content-body">
					<p><a href="http://twitter.com/bcherry">Ben Cherry</a>는 <a href="http://www.adequatelygood.com/2010/3/Object-to-Primitive-Conversions-in-JavaScript">magic of Object - primitive conversions</a> 에서 JavaScript의 toString과 toValue 메소드를 이용한 기본 객체형변환에 대해 심도있게 다루었습니다.</p>

<p>JavaScript에서 특정객체를 alert 혹은 console 에서 확인을 해보면 보통 다음과 같은 결과를 보여줍니다.</p>

<div class="highlight"><pre><code class="javascript"><span class="nx">alert</span><span class="p">(</span> <span class="p">{</span> <span class="p">}</span> <span class="p">);</span>           <span class="c1">// [object Object]</span>
<span class="nx">alert</span><span class="p">(</span> <span class="kd">function</span><span class="p">(){}</span> <span class="p">);</span>  <span class="c1">// function(){}</span>
<span class="nx">alert</span><span class="p">(</span> <span class="mi">1</span> <span class="p">);</span>             <span class="c1">// 1</span>
<span class="nx">alert</span><span class="p">(</span> <span class="s2">&quot;hello&quot;</span> <span class="p">);</span>       <span class="c1">//  hello</span>
<span class="nx">alert</span><span class="p">(</span> <span class="kc">true</span> <span class="p">);</span>          <span class="c1">//  true</span>
<span class="nx">alert</span><span class="p">(</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="p">);</span>    <span class="c1">// 1,2,3</span>
</code></pre></div>

<p>JavaScript의 모든 객체는 toString 과 toValue 메소드를 갖습니다.
위에 나열된 alert 혹은 console 에서 확인한 결과는 내부적으로 호출된 해당 객체의 toString 메소드의 결과입니다.</p>

<p>toValue 메소드는 toString과 비슷해 보이지만 각종 연산자에서 사용되었을 경우 객체의 결과 값을 반환하도록 디자인되어 있습니다.</p>

<div class="highlight"><pre><code class="javascript"><span class="nx">alert</span><span class="p">(</span> <span class="p">{</span> <span class="p">}</span> <span class="o">+</span> <span class="p">{</span> <span class="p">}</span> <span class="p">);</span>                    <span class="c1">// [object Object][object Object]</span>
<span class="nx">alert</span><span class="p">(</span> <span class="kd">function</span><span class="p">(){}</span> <span class="o">+</span> <span class="kd">function</span><span class="p">(){}</span> <span class="p">);</span>  <span class="c1">// function(){}function(){}</span>
<span class="nx">alert</span><span class="p">(</span> <span class="mi">1</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>                         <span class="c1">// 2</span>
<span class="nx">alert</span><span class="p">(</span> <span class="s2">&quot;hello&quot;</span> <span class="o">+</span> <span class="s2">&quot;world&quot;</span> <span class="p">);</span>            <span class="c1">//  helloworld</span>
<span class="nx">alert</span><span class="p">(</span> <span class="kc">true</span> <span class="o">+</span> <span class="kc">true</span> <span class="p">);</span>                  <span class="c1">//  2</span>
<span class="nx">alert</span><span class="p">(</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span> <span class="p">);</span>        <span class="c1">// 1,2,34,5,6</span>
</code></pre></div>

<p>아래 toString과 toValue를 확장해서 쓰는 좋은 예제가 있습니다.</p>

<div class="highlight"><pre><code class="javascript"><span class="kd">function</span> <span class="nx">population</span><span class="p">(</span><span class="nx">country</span><span class="p">,</span> <span class="nx">pop</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="nx">country</span><span class="o">:</span> <span class="nx">country</span><span class="p">,</span>
        <span class="nx">pop</span><span class="o">:</span> <span class="nx">pop</span><span class="p">,</span>
 
        <span class="nx">toString</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="s2">&quot;[Population &quot;</span> <span class="o">+</span> 
                <span class="s2">&quot;\&quot;&quot;</span> <span class="o">+</span> <span class="nx">country</span> <span class="o">+</span> <span class="s2">&quot;\&quot; &quot;</span> <span class="o">+</span>
                <span class="nx">pop</span> <span class="o">+</span>
            <span class="s2">&quot;]&quot;</span><span class="p">;</span>
        <span class="p">},</span>
 
        <span class="nx">valueOf</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">pop</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">};</span>
<span class="p">}</span>
 
<span class="kd">var</span> <span class="nx">america_pop</span> <span class="o">=</span> <span class="nx">population</span><span class="p">(</span><span class="s2">&quot;USA&quot;</span><span class="p">,</span> <span class="mi">350</span><span class="nx">e6</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">mexico_pop</span> <span class="o">=</span> <span class="nx">population</span><span class="p">(</span><span class="s2">&quot;Mexico&quot;</span><span class="p">,</span> <span class="mi">200</span><span class="nx">e6</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">canada_pop</span> <span class="o">=</span> <span class="nx">population</span><span class="p">(</span><span class="s2">&quot;Canada&quot;</span><span class="p">,</span> <span class="mi">200</span><span class="nx">e6</span><span class="p">);</span>
 
<span class="nx">alert</span><span class="p">(</span><span class="nx">america_pop</span><span class="p">);</span> <span class="c1">// [Population &quot;USA&quot; 350000000</span>
 
<span class="kd">var</span> <span class="nx">north_america_pop</span> <span class="o">=</span> <span class="nx">america_pop</span> <span class="o">+</span> <span class="nx">mexico_pop</span> <span class="o">+</span> <span class="nx">canada_pop</span><span class="p">;</span>
 
<span class="nx">alert</span><span class="p">(</span><span class="nx">north_america_pop</span><span class="p">);</span> <span class="c1">// 750000000</span>
</code></pre></div>

<p>JavaScript의 기본 데이터타입 이외에도 개발자가 직접 개발한 Custom 객체도 toString과 toValue 메소드를 적절히 오버라이딩하면 편리하게 묵시적인 형변환을 사용할 수 있습니다. 해당객체가 어떤 작업을 수행하는 객체인지에 대한 설명(toString)으로 활용할 수도 있고, 해당 객체의 동작상태에 대한 값(toValue)로써도 사용할 수 있습니다.</p>

<p>다음은 toString, toValue를 잘못 활용한 예입니다.</p>

<div class="highlight"><pre><code class="javascript"><span class="kd">var</span> <span class="nx">foo</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">toString</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="mi">5</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">valueOf</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="s2">&quot;foo&quot;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>
<span class="nx">alert</span><span class="p">(</span><span class="nx">foo</span><span class="p">.</span><span class="nx">toString</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span> <span class="c1">// 6 (bad!)</span>
<span class="nx">alert</span><span class="p">(</span><span class="nx">foo</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span> <span class="c1">// &quot;foo1&quot; (no good!)</span>
<span class="nx">alert</span><span class="p">(</span><span class="o">+</span><span class="nx">foo</span><span class="p">);</span> <span class="c1">// NaN (the worst!)</span>
</code></pre></div>

<p><a href="http://twitter.com/bcherry">Ben Cherry</a>는 위 묵시적 형변환에 대한 성능적인 검증도 마쳤습니다.
toString, toValue를 적절히 활용하면
재사용 가능한 객체를 디자인할때 좀 더 깔끔한 코드를 작성할 수 있습니다.
단지 alert이나 console로 찍어내는것 만으로도 객체의 상태를 알게 할수 있습니다. 즉 디버깅이 쉬워집니다.
또한 모든 브라우저에서 ECMA명세에 의해 위 내용을 구현하고 있어 호환성 이슈가 없습니다.</p>

<p>그러나 성능적인 측면에서는 대부분의 브라우저가 alert(america_pop) 처럼 묵시적인 toString 메소드 호출보다는 alert(america_pop.toString()) 과 같이 명시적으로 호출하여 객체를 확인하는 것이 빠른것으로 나타났습니다. 아래는 각 브라우저별 묵시적 변환과 명시적 변환법을 사용한 성능비교를 위해 1,000,000번 같은 내용을 반복 호출한 결과표 입니다.</p>

<ul>
<li><strong>Firefox 3.6.2</strong> : 874ms vs 320ms - 약 세배빠름</li>
<li><strong>Chrome5</strong> : 94ms vs 47ms  - 약 두배빠름</li>
<li><strong>Opera 10.50</strong> : 115ms vs 182ms - 약간더 느림</li>
<li><strong>Safari 4</strong> : 409ms vs 280ms - 약 두배 빠름</li>
<li><strong>IE8</strong> : 2856ms vs 2786ms - 거의 비슷함</li>
<li><strong>IE9(preview)</strong> : 645ms vs 633ms - 거의 비슷함</li>
</ul>

<p>출처 :  </p>

<blockquote>
<p><a href="http://ajaxian.com/archives/a-very-detailed-look-at-object-to-primitive-conversions">http://ajaxian.com/archives/a-very-detailed-look-at-object-to-primitive-conversions</a><br>
<a href="http://www.adequatelygood.com/2010/3/Object-to-Primitive-Conversions-in-JavaScript">http://www.adequatelygood.com/2010/3/Object-to-Primitive-Conversions-in-JavaScript</a></p>
</blockquote>

<p>원문출처를 바탕으로 재구성한 포스트입니다.</p>

					</div>
				</div><!-- entry-content -->
				<div class="misc-content">
					<div class="social">
						<ul class="list-linear">
							<li><div class="twitter-tweet"><a href="https://twitter.com/share" class="twitter-share-button" data-count="horizontal" data-via="boxersb" data-lang="en">Tweet</a></div></li>
							<li><div class="twitter-follow"><a href="https://twitter.com/boxersb" class="twitter-follow-button" data-show-count="false" data-lang="en"></a></div></li>
						</ul>
					</div>
					<div class="comment">
					


  <div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=123937814464693";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
<div class="fb-comments" data-href="/javascript/2010/04/05/tostring-and-tovalue-of-object" data-num-posts="5" data-width="640" data-colorscheme="light"></div>



					</div>
				</div><!-- misc-content -->
			</div><!-- bd -->
			<footer class="unit-foot">
				<div class="unit-inner unit-foot-inner">
					<nav class="pagination">
						<ul>
							
							<li class="prev"><a class="internal" rel="prev"  href="/javascript/2010/04/01/observer-pattern-of-javascript" title="View Javascript에서 옵저버 패턴 활용하기">&laquo; Javascript에서 옵저버 패턴 활용하기</a></li>
							
							
							<li class="pipe"> | </li>
							
							
							<li class="next"><a class="internal" rel="next"  href="/etc/2010/04/09/pi-type-competent-person" title="View 파이형 인재">파이형 인재 &raquo;</a></li>
							
						</ul>
					</nav>
					<p class="gotop">
						<a href="#page">Back to Top</a>
					</p>
				</div>
			</footer>

		</div><!-- content -->
	</div><!-- unit-inner -->
</article>

	</section>
</div>

<!-- FOOTER  -->
<div id="footer_wrap" class="outer">
	<footer class="inner">
		<p>Published with <a href="http://pages.github.com">GitHub Pages</a> and <a href="http://jekyllbootstrap.com/">Jekyll</a></p>
	</footer>
</div>

<script>
	(function(d, s) {
		var js, fjs = d.getElementsByTagName(s)[0], load = function(url, id) {
		if (d.getElementById(id)) {return;}
		js = d.createElement(s); js.src = url; js.id = id;
		fjs.parentNode.insertBefore(js, fjs);
		};
	load('//platform.twitter.com/widgets.js', 'tweetjs');
	// load('https://apis.google.com/js/plusone.js', 'gplus1js'); // Checkout http://j.mp/ApDgMr for usage html for this is <div class="g-plusone" data-size="medium"></div>
	// load('//connect.facebook.net/en_US/all.js#xfbml=1', 'fbjssdk'); // Checkout http://j.mp/wZw2xR for using open graph protorol html for this is <div class="fb-like" data-href="/javascript/2010/04/05/tostring-and-tovalue-of-object" data-send="false" data-layout="button_count" data-width="450" data-show-faces="false" data-font="verdana"></div>
	}(document, 'script'));
</script>

	


  <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-39442592-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>




	<script type="text/javascript" src="http://wcs.naver.net/wcslog.js"></script>
	<script type="text/javascript">
		if(!wcs_add) var wcs_add = {};
		wcs_add["wa"] = "a7768d103fade8";
		wcs_do();
	</script>
</body>
</html>
