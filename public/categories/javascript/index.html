<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>javascript | Boxer's Frontend</title>
  <meta name="author" content="boxersb">
  
  <meta name="description" content="boxersb의 front-end 개발 이야기">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="Boxer's Frontend"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.ico" rel="shortcut icon" type="image/x-icon">
  <link href="/favicon.ico" rel="icon" type="image/x-icon">
  <link rel="alternate" href="/atom.xml" title="Boxer's Frontend" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
</head>


<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">Boxer's Frontend</a></h1>
  <h2><a href="/">for all front-end matters..</a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div></header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper">
<h2 class="archive-title category">javascript</h2>


  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2010-04-05T09:40:49.000Z"><a href="/javascript/2010/04/05/tostring-and-tovalue-of-object/">4월 5 2010</a></time>
      
      
  
    <h1 class="title"><a href="/javascript/2010/04/05/tostring-and-tovalue-of-object/">Object의 toString과 toValue 메서드에 대한 고찰</a></h1>
  

    </header>
    <div class="entry">
      
        <p><a href="http://twitter.com/bcherry" target="_blank">Ben Cherry</a>는 <a href="http://www.adequatelygood.com/2010/3/Object-to-Primitive-Conversions-in-JavaScript" target="_blank">magic of Object - primitive conversions</a> 에서 JavaScript의 toString과 toValue 메소드를 이용한 기본 객체형변환에 대해 심도있게 다루었습니다.</p>
<p>JavaScript에서 특정객체를 alert 혹은 console 에서 확인을 해보면 보통 다음과 같은 결과를 보여줍니다.</p>
<figure class="highlight lang-js"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
</pre></td><td class="code"><pre>alert( { } );           <span class="comment">// [object Object]</span>
alert( <span class="keyword">function</span>(){} );  <span class="comment">// function(){}</span>
alert( <span class="number">1</span> );             <span class="comment">// 1</span>
alert( <span class="string">"hello"</span> );       <span class="comment">//  hello</span>
alert( <span class="literal">true</span> );          <span class="comment">//  true</span>
alert( [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>] );    <span class="comment">// 1,2,3</span>
</pre></td></tr></table></figure>



<p>JavaScript의 모든 객체는 toString 과 toValue 메소드를 갖습니다.<br>위에 나열된 alert 혹은 console 에서 확인한 결과는 내부적으로 호출된 해당 객체의 toString 메소드의 결과입니다.</p>
<p>toValue 메소드는 toString과 비슷해 보이지만 각종 연산자에서 사용되었을 경우 객체의 결과 값을 반환하도록 디자인되어 있습니다.</p>
<figure class="highlight lang-js"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
</pre></td><td class="code"><pre>alert( { } + { } );                    <span class="comment">// [object Object][object Object]</span>
alert( <span class="keyword">function</span>(){} + <span class="keyword">function</span>(){} );  <span class="comment">// function(){}function(){}</span>
alert( <span class="number">1</span> + <span class="number">1</span>);                         <span class="comment">// 2</span>
alert( <span class="string">"hello"</span> + <span class="string">"world"</span> );            <span class="comment">//  helloworld</span>
alert( <span class="literal">true</span> + <span class="literal">true</span> );                  <span class="comment">//  2</span>
alert( [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>] + [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>] );        <span class="comment">// 1,2,34,5,6</span>
</pre></td></tr></table></figure>

<p>아래 toString과 toValue를 확장해서 쓰는 좋은 예제가 있습니다.</p>
<figure class="highlight lang-js"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre></td><td class="code"><pre><span class="function"><span class="keyword">function</span> <span class="title">population</span><span class="params">(country, pop)</span> {</span>
    <span class="keyword">return</span> {
        country: country,
        pop: pop,
 
        toString: <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
            <span class="keyword">return</span> <span class="string">"[Population "</span> + 
                <span class="string">"\""</span> + country + <span class="string">"\" "</span> +
                pop +
            <span class="string">"]"</span>;
        },
 
        valueOf: <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
            <span class="keyword">return</span> pop;
        }
    };
}
 
<span class="keyword">var</span> america_pop = population(<span class="string">"USA"</span>, <span class="number">350e6</span>);
<span class="keyword">var</span> mexico_pop = population(<span class="string">"Mexico"</span>, <span class="number">200e6</span>);
<span class="keyword">var</span> canada_pop = population(<span class="string">"Canada"</span>, <span class="number">200e6</span>);
 
alert(america_pop); <span class="comment">// [Population "USA" 350000000</span>
 
<span class="keyword">var</span> north_america_pop = america_pop + mexico_pop + canada_pop;
 
alert(north_america_pop); <span class="comment">// 750000000</span>
</pre></td></tr></table></figure>

<p>JavaScript의 기본 데이터타입 이외에도 개발자가 직접 개발한 Custom 객체도 toString과 toValue 메소드를 적절히 오버라이딩하면 편리하게 묵시적인 형변환을 사용할 수 있습니다. 해당객체가 어떤 작업을 수행하는 객체인지에 대한 설명(toString)으로 활용할 수도 있고, 해당 객체의 동작상태에 대한 값(toValue)로써도 사용할 수 있습니다.</p>
<p>다음은 toString, toValue를 잘못 활용한 예입니다.</p>
<figure class="highlight lang-js"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="code"><pre><span class="keyword">var</span> foo = {
    toString: <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
        <span class="keyword">return</span> <span class="number">5</span>;
    },
    valueOf: <span class="function"><span class="keyword">function</span> <span class="params">()</span> {</span>
        <span class="keyword">return</span> <span class="string">"foo"</span>;
    }
};
alert(foo.toString() + <span class="number">1</span>); <span class="comment">// 6 (bad!)</span>
alert(foo + <span class="number">1</span>); <span class="comment">// "foo1" (no good!)</span>
alert(+foo); <span class="comment">// NaN (the worst!)</span>
</pre></td></tr></table></figure>

<p><a href="http://twitter.com/bcherry" target="_blank">Ben Cherry</a>는 위 묵시적 형변환에 대한 성능적인 검증도 마쳤습니다.<br>toString, toValue를 적절히 활용하면<br>재사용 가능한 객체를 디자인할때 좀 더 깔끔한 코드를 작성할 수 있습니다.<br>단지 alert이나 console로 찍어내는것 만으로도 객체의 상태를 알게 할수 있습니다. 즉 디버깅이 쉬워집니다.<br>또한 모든 브라우저에서 ECMA명세에 의해 위 내용을 구현하고 있어 호환성 이슈가 없습니다.</p>
<p>그러나 성능적인 측면에서는 대부분의 브라우저가 alert(america_pop) 처럼 묵시적인 toString 메소드 호출보다는 alert(america_pop.toString()) 과 같이 명시적으로 호출하여 객체를 확인하는 것이 빠른것으로 나타났습니다. 아래는 각 브라우저별 묵시적 변환과 명시적 변환법을 사용한 성능비교를 위해 1,000,000번 같은 내용을 반복 호출한 결과표 입니다.</p>
<ul>
<li><strong>Firefox 3.6.2</strong> : 874ms vs 320ms - 약 세배빠름</li>
<li><strong>Chrome5</strong> : 94ms vs 47ms  - 약 두배빠름</li>
<li><strong>Opera 10.50</strong> : 115ms vs 182ms - 약간더 느림</li>
<li><strong>Safari 4</strong> : 409ms vs 280ms - 약 두배 빠름</li>
<li><strong>IE8</strong> : 2856ms vs 2786ms - 거의 비슷함</li>
<li><strong>IE9(preview)</strong> : 645ms vs 633ms - 거의 비슷함</li>
</ul>
<p>출처 :  </p>
<blockquote>
<p><a href="http://ajaxian.com/archives/a-very-detailed-look-at-object-to-primitive-conversions" target="_blank"><a href="http://ajaxian.com/archives/a-very-detailed-look-at-object-to-primitive-conversions">http://ajaxian.com/archives/a-very-detailed-look-at-object-to-primitive-conversions</a></a><br><a href="http://www.adequatelygood.com/2010/3/Object-to-Primitive-Conversions-in-JavaScript" target="_blank"><a href="http://www.adequatelygood.com/2010/3/Object-to-Primitive-Conversions-in-JavaScript">http://www.adequatelygood.com/2010/3/Object-to-Primitive-Conversions-in-JavaScript</a></a></p>
</blockquote>
<p>원문출처를 바탕으로 재구성한 포스트입니다.</p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2010-04-01T09:34:08.000Z"><a href="/javascript/2010/04/01/observer-pattern-of-javascript/">4월 1 2010</a></time>
      
      
  
    <h1 class="title"><a href="/javascript/2010/04/01/observer-pattern-of-javascript/">Javascript에서 옵저버 패턴 활용하기</a></h1>
  

    </header>
    <div class="entry">
      
        <p>Observer Pattern이란 여러개의 Class를 작성하였을 때 각 Class들간의 연관성을 유지하기 위해 결합도를 높이는 대신 객체의 상태를 관찰하는 방법을 사용하는 디자인 패턴입니다.</p>
<p>예를 들어 기본적인 MVC 패턴을 사용하여 어플리케이션을 개발하였을 경우 각 Model. View, Controller 클래스들은 각각 다른 역할을 하게됩니다. 그러나 Controller 가 Model과 View의 중심에서 각 객체들에게 명령을 내리면 명령을 받은 객체는 명령의 실행결과나 상태를 Controller에게 보고하여야 합니다.<br>이때 일반적으로 높은 결합도를 가지게 됩니다. Model이나 View의 입장에선 Controller에게 보고하기 위한 수단으로 Controller의 참조를 취하게 되기 때문이죠</p>
<p>Controller에서 Model의 메소드를 실행</p>
<figure class="highlight lang-js"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre>Controller.Model = <span class="keyword">new</span> Model(Controller);
Controller.View = <span class="keyword">new</span> View(Controller);

Controller.Model.getMemberList();
</pre></td></tr></table></figure>

<p>Model은 Controller의 참조를 가지고 있으며 요청결과를 Controller에게 알려줌.</p>
<figure class="highlight lang-js"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
</pre></td><td class="code"><pre>Model = <span class="keyword">function</span>(controller){
   <span class="keyword">this</span>.controller = controller;
};
Model.prototype = {
	<span class="comment">//some code blocks</span>
	getMemberList : <span class="keyword">function</span>(){
		<span class="comment">// request Query and Return</span>
		<span class="keyword">this</span>.controller.printMemberList();
	}
};
</pre></td></tr></table></figure>

<p>이런식으로 어플리케이션이 짜여질 경우 Model과 Controller와의 결합도가 매우 높아지기 때문에 재사용성이 떨어지며 유지보수가 힘들어지게 됩니다.</p>
<p>이때 Observer Pattern을 적용하면 이러한 문제점을 어느정도 해소할 수 있습니다.<br>JavaScript 기반의 Front End 환경에서는 쉽게 예를 들어 DOM Event 모델을 예로 들 수 있겠습니다.</p>
<p>element가 element를 Control 하는 객체를 알 필요가 없음</p>
<figure class="highlight lang-js"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>element.addEventListener(<span class="string">"click"</span>, Controller.onElementClick);
</pre></td></tr></table></figure>

<p>일반객체에 Custom Event를 만들자<br>﻿DOM Event 모델﻿ 이외에도 Observer 패턴은 얼마든지 활용할 수 있습니다.<br>위에 나왔던 MVC 모델을 예로 들자면.. Model과 View는 Controller의 참조를 취득할 필요 없이..<br>특정한 Event를 발생시키도록 작성할 수 있습니다.</p>
<figure class="highlight lang-js"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></td><td class="code"><pre><span class="keyword">var</span> Controller = <span class="keyword">function</span>(){
    <span class="keyword">this</span>.Model = <span class="keyword">new</span> Model();
    <span class="keyword">this</span>.View = <span class="keyword">new</span> View();
    <span class="comment">// some code blocks</span>
    <span class="keyword">this</span>.bindEvents();
    <span class="keyword">this</span>.Model.getMemberList();
};
Controller.prototype = {
   bindEvents : <span class="keyword">function</span>(){
       <span class="keyword">this</span>.Model.addEvent(<span class="string">"onGetMemberListComplete"</span>,
                         <span class="keyword">this</span>.printMemberList);
       <span class="comment">// some code blocks</span>
   },
   printMemberList: <span class="keyword">function</span>(data){
       <span class="keyword">this</span>.View.showMemberList(data);
       <span class="comment">// some code blocks</span>
   }
};
</pre></td></tr></table></figure>

<p>위와 같은 방식으로 하면 Model과 View는 Controller를 따로 알필요 없이 Event 모델만으로 동작을 하게 됩니다. 물론 저기서 나오는 addEvent라는 메소드와 onGetMemberListComplete 라는 이벤트 타입은 제가 만들어 낸것이죠.<br>그럼 어떻게 만드냐구요?? 제가 만든 Observer Class를 공개합니다.</p>
<figure class="highlight lang-js"><figcaption><span>Observer.js</span></figcaption><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
</pre></td><td class="code"><pre> <span class="comment">/*!
 * JavaScript Observer
 *
 * Date: 2010. 4. 1.
 * Author: boxersb(Kyoungtaek Koo)
 * blog: http://boxersb.github.io
 * twitter: @boxersb
 * gmail: boxersb@gmail.com
 *
 * Copyright (c) 2010 boxersb (Kyoungtaek Koo)
 */</span>
<span class="keyword">var</span> Observer = {
  EVENTID : <span class="number">0</span>,
  addEvent : <span class="keyword">function</span>(type, hnd){
    <span class="keyword">if</span>(!<span class="keyword">this</span>.listeners) <span class="keyword">this</span>.listeners = {};
    <span class="keyword">if</span>(!<span class="keyword">this</span>.listeners[type]) <span class="keyword">this</span>.listeners[type] = {};
    
    <span class="keyword">var</span> eventId = Observer.EVENTID++;
    <span class="keyword">this</span>.listeners[type][eventId] = hnd;
    
    <span class="keyword">return</span> eventId;
  },
  
  fireEvent : <span class="keyword">function</span>(type){
    <span class="keyword">if</span>(!<span class="keyword">this</span>.listeners || !<span class="keyword">this</span>.listeners[type]) <span class="keyword">return</span> <span class="literal">false</span>;
    <span class="keyword">var</span> handlers = <span class="keyword">this</span>.listeners[type], eventId,
      args =  Array.prototype.slice.call(arguments);
    <span class="keyword">if</span>(handlers.stop) <span class="keyword">return</span> <span class="literal">false</span>;
    
    args.shift();
    <span class="keyword">for</span>(eventId <span class="keyword">in</span> handlers) <span class="keyword">if</span>(handlers.hasOwnProperty(eventId)){
      <span class="keyword">if</span>(eventId !== <span class="string">"stop"</span>){
        <span class="keyword">if</span>(!handlers[eventId].stop){
          handlers[eventId].apply(<span class="keyword">this</span>, args);
        }
      } 
    };
  },
  
  removeEvent : <span class="keyword">function</span>(type, hnd){
    <span class="keyword">if</span>(!<span class="keyword">this</span>.listeners || !<span class="keyword">this</span>.listeners[type]) <span class="keyword">return</span> -<span class="number">1</span>;
    <span class="keyword">var</span> handlers = <span class="keyword">this</span>.listeners[type], eventId = -<span class="number">1</span>;
    <span class="keyword">if</span>(<span class="keyword">typeof</span> hnd === <span class="string">"function"</span>){
      <span class="keyword">for</span>(eventId <span class="keyword">in</span> handlers) <span class="keyword">if</span>(handlers.hasOwnProperty(f)){
        <span class="keyword">if</span>(handlers[eventId] === hnd){
          <span class="keyword">delete</span> handlers[eventId];
          <span class="keyword">break</span>;
        } 
      };
      <span class="keyword">return</span> !handlers[eventId];
    }<span class="keyword">else</span>{
      <span class="keyword">if</span>(handlers[hnd]) <span class="keyword">delete</span> handlers[hnd]
      <span class="keyword">return</span> !handlers[hnd];
    };
  },
  
  stopEvent : <span class="keyword">function</span>(type, hnd){
    <span class="keyword">if</span>(!<span class="keyword">this</span>.listeners || !<span class="keyword">this</span>.listeners[type]) <span class="keyword">return</span> -<span class="number">1</span>;
    <span class="keyword">var</span> handlers = <span class="keyword">this</span>.listeners[type], eventId = -<span class="number">1</span>; 
    <span class="keyword">if</span>(hnd){
      <span class="keyword">if</span>(<span class="keyword">typeof</span> hnd === <span class="string">"function"</span>){
        <span class="keyword">for</span>(eventId <span class="keyword">in</span> handlers) <span class="keyword">if</span>(handlers.hasOwnProperty(f)){
          <span class="keyword">if</span>(handlers[eventId] === hnd){
            handlers[eventId].stop = <span class="literal">true</span>;
          }
        };
      }<span class="keyword">else</span>{
        handlers[hnd].stop = <span class="literal">true</span>;
      }
    }<span class="keyword">else</span>{  
      handlers.stop = <span class="literal">true</span>;
    }
  },
  
  restoreEvent : <span class="keyword">function</span>(type, hnd){
    <span class="keyword">if</span>(!<span class="keyword">this</span>.listeners || !<span class="keyword">this</span>.listeners[type]) <span class="keyword">return</span> -<span class="number">1</span>;
    <span class="keyword">var</span> handlers = <span class="keyword">this</span>.listeners[type], eventId = -<span class="number">1</span>;
    <span class="keyword">if</span>(hnd){
      <span class="keyword">if</span>(<span class="keyword">typeof</span> hnd === <span class="string">"function"</span>){
        <span class="keyword">for</span>(eventId <span class="keyword">in</span> handlers) <span class="keyword">if</span>(handlers.hasOwnProperty(f)){
          <span class="keyword">if</span>(handlers[eventId] === hnd){
            handlers[eventId].stop = <span class="literal">false</span>;
          }
        };
      }<span class="keyword">else</span>{
        handlers[hnd].stop = <span class="literal">false</span>;
      }
    }<span class="keyword">else</span>{
      handlers.stop = <span class="literal">false</span>;
    }
  },
  
  applyObserver : <span class="keyword">function</span>(tclass){
    <span class="keyword">for</span>(<span class="keyword">var</span> p <span class="keyword">in</span> <span class="keyword">this</span>){
      <span class="keyword">if</span>(<span class="keyword">this</span>[p] !== arguments.callee){       
        tclass.prototype[p] = <span class="keyword">this</span>[p];
      }
    };

    <span class="keyword">return</span> <span class="literal">true</span>;
  }
};
</pre></td></tr></table></figure>

<p>위 Observer 객체를 사용하여 Event 모델을 구축합니다.</p>
<figure class="highlight lang-js"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="code"><pre><span class="comment">// Controller definitions...</span>
Observer.applyObserver(Controller);
Model = <span class="keyword">function</span>(){
    <span class="comment">// some code blocks</span>
};
Model.prototype = {
    <span class="comment">//some code blocks</span>
    getMemberList : <span class="keyword">function</span>(){
          <span class="comment">// request Query and Return</span>
         <span class="keyword">var</span> data = xhr.responseXML;
          <span class="keyword">this</span>.fireEvent(<span class="string">"onGetMemberListComplete"</span>, data);
    }
};
Observer.applyObserver(Model);
</pre></td></tr></table></figure>

<ul>
<li><strong>addEvent</strong>(<em>type, handler</em>) - 관찰(Observe)할 이벤트를 추가한다. 이벤트 타입은 자유롭게 설정.</li>
<li><strong>fireEvent</strong>(<em>type, args..</em>) - 관찰하고 있는 이벤트 type의 모든 헨들러를 호출한다. </li>
<li><strong>removeEvent</strong>(<em>type, handler</em>) - 특정 이벤트 옵저버를 제거한다.</li>
<li><strong>stopEvent</strong>(<em>type, handler</em>) - 특정 이벤트 옵저버를 일시적으로 정지시킨다(제거하지 않음)</li>
<li><strong>restoreEvent</strong>(<em>type, handler</em>) - 정지된 특정 이벤트 옵저버를 복원한다.</li>
<li><strong>applyObserver</strong>(<em>tclass</em>) - 대상 클래스에 Observer API를 확장한다.</li>
</ul>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


  
    <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2007-03-12T09:33:53.000Z"><a href="/javascript/2007/03/12/firefox-korean-lang-trick/">3월 12 2007</a></time>
      
      
  
    <h1 class="title"><a href="/javascript/2007/03/12/firefox-korean-lang-trick/">파이어폭스에서 한글관련 이벤트 처리 트릭</a></h1>
  

    </header>
    <div class="entry">
      
        <p>파이어폭스의 인기가 전세계적으로 높아지고 있습니다만…</p>
<p>한글 및 기타 아시아권 언어입력시 이벤트 헨들러가 호출되지 않고 있는문제는 아직도 고쳐지고 있지 않습니다..</p>
<p>다들 아시죠???</p>
<p>우리가 흔히 쓰는 입력박스에서의 이벤트 헨들링 -(대표적으로 자동완성기능[서제스트])- 을 하고자 할때 한글을 입력하면 이벤트 헨들러가 호출되지 않는 치명적인 문제가 있습니다..</p>
<p>아래의 버그질라 링크를 보시면 한글 입력시 이벤트 헨들러를 호출할 수 있게끔 하는 작은 트릭을 경험해 보실 수 있습니다.</p>
<p><a href="https://bugzilla.mozilla.org/attachment.cgi?id=240567" target="_blank"><a href="https://bugzilla.mozilla.org/attachment.cgi?id=240567">https://bugzilla.mozilla.org/attachment.cgi?id=240567</a></a></p>
<p>문제의 요지는 간단합니다… 한글을 입력할시 파이어폭스의 한글입력기는 글자 조합을 하기위해 value세팅과 이벤트 헨들러 호출을 정지 시킵니다.. 정확히 말해 onkeydown이나 onkeyup이벤트발생시 헨들러가 최초 한번은 호출됩니다. 그러나 한글 조합을 위해 value는 세팅되어 있지 않습니다. 이 문제를 피해가기 위해서는..</p>
<ol>
<li>db라는 가상의 변수를 만듭니다.</li>
<li>현재 입력필드의 value 값이 db의 값과 같은지를 비교합니다..  </li>
<li>value의 값을 확인합니다.<br>3-1. 다르다면 db값을 현재 value로 세팅하고 원래 하고자 했던 이벤트 헨들링을 합니다.<br>3-2. 같다면 이벤트 헨들링 코드를 실행하지 않고 넘어갑니다.</li>
<li>setTimeout을 이용하여 이벤트 헨들러 자체를 다시 부릅니다. 즉, 재귀적으로 호출합니다. (recursive)</li>
</ol>
<p>간단히 말해 setTimeout을 이용하여 재귀호출을 할시 브라우저 입장에서는 이벤트가 발생하여 헨들러가 호출되는것이 아닌 일반 함수의 실행으로 간주하게 됩니다. 그렇게하면 세팅된 value를 가지고 이벤트 헨들링을 할 수 있습니다.</p>
<p>재귀적 호출을 계속할 경우 CPU점유율 및 시스템이 불안해 지지 않냐.. 라는 의문을 가지는건 당연합니다. 그렇기 때문에 부담이되는 이벤트 헨들링 코드는 db에 현재 value를 세팅할때 (3-1)만 실행합니다.<br>이미 같다면 이벤트는 헨들링 된것이고 비교외에 아무것도 실행하지 않았기 때문에 커다란 부담이 되지 않습니다. 만약 그래도 불안하다면 특정동작시 setTimeout 했던것을 clear 하는 코드를 추가해주시면 훨신 안정적으로 돌릴 수 있습니다.. cpu점유율 및 다방면 테스트 결과 트릭을 쓰지 않았을 경우와 큰 차이가 없었습니다.</p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


  

  <nav id="pagination">
  
  
  <div class="clearfix"></div>
</nav>
</div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="Search">
    <input type="hidden" name="q" value="site:boxersb.github.io">
  </form>
</div>

  
<div class="widget tag">
  <h3 class="title">Categories</h3>
  <ul class="entry">
  
    <li><a href="/categories/angularJS/">angularJS</a><small>1</small></li>
  
    <li><a href="/categories/etc/">etc</a><small>3</small></li>
  
    <li><a href="/categories/javascript/">javascript</a><small>3</small></li>
  
    <li><a href="/categories/typescript/">typescript</a><small>1</small></li>
  
  </ul>
</div>


  
<div class="widget tag">
  <h3 class="title">Tags</h3>
  <ul class="entry">
  
    <li><a href="/tags/-형/">-형</a><small>1</small></li>
  
    <li><a href="/tags/2010/">2010</a><small>1</small></li>
  
    <li><a href="/tags/I형/">I형</a><small>1</small></li>
  
    <li><a href="/tags/MVC/">MVC</a><small>1</small></li>
  
    <li><a href="/tags/angular/">angular</a><small>1</small></li>
  
    <li><a href="/tags/firefox/">firefox</a><small>1</small></li>
  
    <li><a href="/tags/git/">git</a><small>1</small></li>
  
    <li><a href="/tags/github/">github</a><small>1</small></li>
  
    <li><a href="/tags/javascript/">javascript</a><small>4</small></li>
  
    <li><a href="/tags/jekyll/">jekyll</a><small>1</small></li>
  
    <li><a href="/tags/language/">language</a><small>1</small></li>
  
    <li><a href="/tags/mozilla/">mozilla</a><small>1</small></li>
  
    <li><a href="/tags/object/">object</a><small>1</small></li>
  
    <li><a href="/tags/observer/">observer</a><small>1</small></li>
  
    <li><a href="/tags/pages/">pages</a><small>1</small></li>
  
    <li><a href="/tags/pattern/">pattern</a><small>1</small></li>
  
    <li><a href="/tags/pi/">pi</a><small>1</small></li>
  
    <li><a href="/tags/specification/">specification</a><small>1</small></li>
  
    <li><a href="/tags/toString/">toString</a><small>1</small></li>
  
    <li><a href="/tags/toValue/">toValue</a><small>1</small></li>
  
    <li><a href="/tags/typescript/">typescript</a><small>1</small></li>
  
    <li><a href="/tags/웹개발/">웹개발</a><small>1</small></li>
  
    <li><a href="/tags/인재/">인재</a><small>1</small></li>
  
    <li><a href="/tags/트랜드/">트랜드</a><small>1</small></li>
  
    <li><a href="/tags/파이형/">파이형</a><small>1</small></li>
  
  </ul>
</div>

</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2013 boxersb
  
</div>
<div class="clearfix"></div></footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>


<script type="text/javascript">
var disqus_shortname = 'boxersbgithub';

(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
</script>



<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>

</body>
</html>